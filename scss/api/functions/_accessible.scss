// Accessible: Adjusts lightness of $color1 to be contrast $ratio on $color2.

@use "../sass" as *;
@use "contrast-ratio" as *;

@function accessible($color1, $color2, $ratio: 7) {
	// Max ratio at maximum possible value:
	$ratio: MATH-min($ratio, MATH-max(
		contrast-ratio(#FFF, $color2),
		contrast-ratio(#000, $color2)
	));

	// If lighter color on background meets requirements:
	$lighten: contrast-ratio(#FFF, $color2) >= $ratio;

	// While ratio is too low; lighten or darken color:
	@while contrast-ratio($color1, $color2) < $ratio {
		@if $lighten {
			$color1: COLOR-adjust($color1, $lightness: +1%);
		}
		@else {
			$color1: COLOR-adjust($color1, $lightness: -1%);
		}
	}

	// Return color:
	@return $color1;
}